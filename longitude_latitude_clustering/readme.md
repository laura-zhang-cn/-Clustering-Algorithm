#  经纬度聚类  
## 1. 需求说明与分析  
**1） 目标：**  
在指定的区域半径下，对址经纬度聚类，然后进一步分析类的群体特征，对于属于该类的个体，可根据类的特征，采取不同的操作。

**2） 分析：**  
对于经纬度的聚类 属于 基于密度的聚类，即 通过一定区域的点的密集度来划分类，最终输出的类的数量是不固定的。  
目前基于密度的聚类算法主要有 DBSCAN 和meanshift ，其中：  
  * DBSCAN的收敛标准是： “对于任意**密度可达**的边缘点P ，P的**密度直达**的点的数量小于阈值，则收敛，生成新类”，  
  这就导致无法控制最终的 某一个类的最大边界距离，即使设置 直达密度esc=2公里，但是由于是基于密度可达的点P计算的，  
  最终的类的边界距离 可能有20公里甚至更大，无法控制，这并不是我们想要的（北京北三环到南三环才15km，范围太大，这个算法得出的结果没法保障最大边界距离）。  
  
  * meanshift的收敛标准是： “**固定的半径**下，不断的**更新质心**，直到新质心与旧质心的距离小于阈值，则收敛，生成新类”，可见，meanshift是符合需求的。  
  
聚类算法 最核心的步骤就是计算点的距离，对于经纬度，我们认为地球是个球体，首先我们可以把经纬度degrees转化为弧度radians，  
然后使用Haversine距离算子，计算球体上两个弧度点的距离。   
  
最终我们的算法方案是  **meanshift+Haversine**  
  
## 2 算法流程  
**1) Haversine距离算子的公式:**    
                              H(d/r)=H(dlat)+cos(lat1)×cos(lat2)×H(dlng)    

其中：
                                            H(x)=sin(x/2)^2  
变量说明：    
d: 球体上两个点的距离 （要求的目标值）  
r:球体半径，默认为1.0，若为地球，可设置 r=6371.0 （单位千米）  
dlat: lat1-lat2 ，纬度之差  
dlng: lng1-lat2, 经度之差  
注意： lng1,lat1,lng2,lat2 都是已由degree形式转化为弧度radians形式的，转化公式是  radian=degree*pi/180.0  

**2) meanshift算法流程:**    
![算法流程](https://github.com/laura-zhang-cn/-Clustering-Algorithm/blob/master/images/meanshift_haversine%E7%AE%97%E6%B3%95%E6%B5%81%E7%A8%8B.png)  
